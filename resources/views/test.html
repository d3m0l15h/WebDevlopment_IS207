<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <title>Shopping Cart Example</title>
        <style>
  .products {
    display: flex;
  }
  .product {
    padding: 10px;
    margin-right: 10px;
    text-align: center;
  }
  .cart {
    margin-top: 20px;
  }
  .cart table {
    border-collapse: collapse;
    margin-bottom: 20px;
  }
  
    .cart table td {
    border: 1px solid black;
    text-align: center;
}
</style>
    </head>
    <body>

        <div class="products">
            <div class="product">
                <img
                    src="iphone.jpeg"
                    alt="iPhone 12">
                <p>iPhone 12</p>
                <button data-product="iPhone 12" data-price="24000000">Mua hàng</button>
            </div>
            <div class="product">
                <img
                    src="samsung.jpeg"
                    alt="Samsung S20">
                <p>Samsung S20</p>
                <button data-product="Samsung S20" data-price="12000000">Mua hàng</button>
            </div>
            <div class="product">
                <img
                    src="oppo.jpeg"
                    alt="Reno6 Pro">
                <p>Reno6 Pro</p>
                <button data-product="Reno6 Pro" data-price="10000000">Mua hàng</button>
            </div>
        </div>

        <div class="cart">
            <h2>Giỏ hàng</h2>
            <table  id="cartTable">
                
            </table>
            <button id="checkoutButton">Thanh toán</button>
            <p>Tổng tiền: <span id="totalPrice">0</span></p>
        </div>
    <script>
        $(document).ready(function() {
            let totalAmount = 0;
            let cartItems = {};
            function addToCart(productName, price) {
                if (cartItems[productName]) {
                    cartItems[productName].quantity++;
                    cartItems[productName].row.find('td:eq(1)').text(cartItems[productName].quantity);
                } else {
                    let $deleteButton = $('<button>').text('Delete').click(function() {
                        let $row = $(this).closest('tr');
                        totalAmount -= cartItems[productName].price * cartItems[productName].quantity;
                        $row.remove();
                        delete cartItems[productName];
                    });
    
                    let $row = $('<tr>').append(
                        $('<td>').text(productName),
                        $('<td>').text('1'),
                        $('<td>').text(price),
                        $('<td>').append($deleteButton)
                    );
    
                    $('#cartTable').append($row);
    
                    cartItems[productName] = {
                        quantity: 1,
                        price: price,
                        row: $row
                    };
                }
    
                totalAmount += price;
            }
            function updateTotalPrice() {
                $('#totalPrice').text(totalAmount);
            }
            $('.product button').click(function() {
                let productName = $(this).prev().text();
                let price = parseInt($(this).data('price'), 10);
                addToCart(productName, price);
            });
            $('#checkoutButton').click(function() {
                updateTotalPrice();
            });
        });
    </script>
    </body>
</html>
